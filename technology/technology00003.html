<!doctype html>
<html>

	<head>
		<meta charset="utf-8">
		<title>博客用命令</title>
		<meta name="Keywords" content="">
		<meta name="Description" content="">
		<link href="css/index.css" rel="stylesheet">
		<!--[if lt IE 9]>
<script src="js/modernizr.js"></script>
<![endif]-->
	</head>

	<body>
		<header>
			<h1><a href="">花气袭人是酒香</a></h1>
			<p>这夏天里流动的风情，是停不住的舞步和唱不完的情歌，当玫瑰花瓣飘飞的那一刻，风会带走所有的想念.......</p>
		</header>
		<div class="navswf">
			<object id="customMenu" data="images/nav.swf" width="528" height="70" type="application/x-shockwave-flash"><param name="allowScriptAccess" value="always"><param name="allownetworking" value="all"><param name="allowFullScreen" value="true"><param name="wmode" value="transparent"><param name="menu" value="false"><param name="scale" value="noScale"><param name="salign" value="1">
</object>
			<div id="nav">
				<ul>
					<li>
						<a href="../index.html">网站首页</a>
					</li>
					<li>
						<a href="../manShenhuo/manShenhuo.html" title="慢生活">慢生活</a>
					</li>
					<li>
						<a href="../technology/technology.html" title="技术探讨">技术探讨</a>
					</li>
					<li>
						<a href="../webMoban/webMoban.html" title="个人网站模板">网站模板</a>
					</li>
					<li>
						<a href="../newstalk/newstalk.html" target="" title="碎言碎语">碎言碎语</a>
					</li>
					<li>
						<a href="../liuYanban/liuYanban.html" title="留言版">留言版</a>
					</li>
				</ul>
				<script src="js/silder.js"></script>
				<!--获取当前页导航 高亮显示标题-->
			</div>
		</div>
		<div class="blank"></div>
		<article>
			<div class="content">
				<div class="bloglist">
					<!--article begin-->
					<ul>
						<h1><strong><strong><strong>mybatis缓存机制</strong></strong></strong></h1>

						<p>mybatis 缓存 分为一级缓存和二级缓存</p>

						<ol>
							<li>一级缓存为sqlSession，缓存内容只在sqlSession内有效</li>
							<li>二级缓存为mapper级别的缓存</li>
						</ol>

						<p><strong><strong><strong>一级缓存</strong></strong>
							</strong>
						</p>

						<p>在操作数据库时，会首先创建sqlSession会话对象，sql对象中会有一个私有的hashMap对象来储存数据，hashMap以（sql-查询语句,param-参数,nameSpace-命名空间）为key,以查询返回语句为value</p>

						<p>&nbsp;public void test1() throws Exception{</p>

						<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SqlSession session = SqlSessionFac.getSqlSession();</p>

						<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// 第一次查询</p>

						<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;User user = userMapper.selectUserById(1);</p>

						<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(user.toString());</p>

						<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// 第二次查询</p>

						<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;User user2 = userMapper.selectUserById(1);</p>

						<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(user2.toString());</p>

						<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;session.close();</p>

						<p>}</p>

						<p>第一次执行select后，会将查询结果储存在sqlSession中，第二次 select ，如果查询参数相同，并且执行同一sql,则直接在缓存中读取数据。</p>

						<p>&nbsp;</p>

						<p>注意 ：</p>

						<p>如果第一次查询之后，执行了（update ,delete,insert）,那么mybatis会清空缓存的数据。</p>

						<p>mybatis默认开启一级缓存</p>

						<p><strong><strong><strong>二级缓存</strong></strong>
							</strong>
						</p>

						<p>1.二级缓存是mapper级别的缓存，也就是同一个namespace的mappe.xml，当多个SqlSession使用同一个Mapper操作数据库的时候，得到的数据会缓存在同一个二级缓存区域</p>

						<p>2.二级缓存默认关闭，开启时，会优先将结果缓存到二级缓存中，查询时首先去一级缓存中查找，若没有则在二级缓存中查找，找到则返回查询结果</p>

						<p>3.同一级缓存一样：</p>

						<p>a.用于储存的hashMap以（sql-查询语句,param-参数,nameSpace-命名空间）为key,以查询返回语句为value</p>

						<p>b.如果第一次查询之后，执行了（update ,delete,insert）,那么mybatis会清空缓存的数据。</p>

						<p class="dateview" style="margin-top: 10px;"><span>2013-05-11</span><span>作者：张文波</span><span>分类：<a href="" target="_blank">随心笔记</a></span><span>阅读(0)</span><span>评论(0)</span></p>
					</ul>
					<!--article end-->
				</div>
			</div>
			<aside class="navsidebar">
				<h2><p>个人档案</p></h2>
				<div class="vcard">
					<p class="fn">姓名：张文波</p>
					<p class="nickname">网名：最后的轻语</p>
					<p class="url">主页：
						<a href="http://zwbzy.top/" target="_blank">http://zwbzy.top/</a>
					</p>
					<p class="address">现居：北京市—房山区</p>
					<p class="role">职业：网java开发</p>
				</div>
				<h2><p>目录</p></h2>
				<ul class="news">
					<li>
						<a href="">慢生活(3)</a>
					</li>
					<li>
						<a href="">程序人生(25)</a>
					</li>
					<li>
						<a href="">经典美文(39)</a>
					</li>
				</ul>
				<h2><p>外文链接</p></h2>
				<ul class="news">
					<li>
						<a href="https://www.cnblogs.com/springboot/p/8445780.html">SpringCloud微服务框架搭建</a>
					</li>
					<li>
						<a href="https://blog.csdn.net/weixin_37390956/article/details/80399613">SpringMVC+Thymeleaf配置</a>
					</li>
					<li>
						<a href="">6月毕业季，祝福送给你</a>
					</li>
					<li>
						<a href="">生活常有缺席的-可搞笑从来不缺席</a>
					</li>
					<li>
						<a href="">为了一个不存在的梦，执念了那么多年</a>
					</li>
					<li>
						<a href="">妹妹，明天你就要嫁人啦</a>
					</li>
				</ul>
				<h2><p>文章归档</p></h2>
				<ul class="news">
					<li>
						<a href="">2008 年三月</a>
					</li>
					<li>
						<a href="">2008 年四月</a>
					</li>
					<li>
						<a href="">2008 年六月</a>
					</li>
				</ul>
				<h2><p>友情链接</p></h2>
				<ul class="news">
					<li>
						<a href="http://www.yangqq.com">杨青个人博客</a>
					</li>
				</ul>
			</aside>
		</article>
		<div id="copright">Design by
			<a href="http://www.yangqq.com" target="_blank">DanceSmile</a>
		</div>
	</body>

</html>